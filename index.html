<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Marvel|Source+Sans+Pro:600&display=swap" rel="stylesheet">
    <link href="assets/style/style.css" type="text/css" rel="stylesheet">
</head>
<body>
    <div class="container.fluid text-center bg-light p-3">
        <h1 class="mb-5">Password Generator</h1>

        <div class="password container bg-white p-3 border rounded">
            <h2 class="text-left">Generate a Password</h2>
            <hr>
            <textarea
                readonly
                id="password"
                placeholder="Your Secure Password"
                aria-label="Generated Password"
                class="w-75 generator rounded pb-5 pt-2 text-center"
            ></textarea>
            <hr>
            <div class="row">
                <div class="col-sm-6 mb-2">
                    <button type="button" id="gen" class="btn btn-danger btn-lg">Generate Password</button>
                </div>
                <div class="col-sm-6 mb-2"> 
                    <button onclick="copyPassword()" type="button" id="copy" class="btn btn-secondary btn-lg" >Copy to Clipboard</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        
        const alphaLower ="abcdefghijklmnopqrstuvwxyz";
        const alphaUpper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const special = " !#$%&'()*+,-./:;<=>?@[]^_`{|}~";
        const numerical = "012345689";
        let passwordGenerated = ''; 

 
        document.getElementById("gen").addEventListener("click", function(){ 
            genPassword(); 
            document.getElementById("password").innerHTML = passwordGenerated;
        });

        function copyPassword(){
            let copyText = document.getElementById("password");
            copyText.select();
            document.execCommand("copy");
            alert("Password copied to your clipboard."); 
        }; 

        function genPassword() {
            
            let passwordOptions ='';
            let passwordCheck= []; 
//user prompt to determine password lenght
            alert("Welcome to the Password Generator!")
            let numberChar = prompt("How many characters would you like in your password? It must be between 8 and 128.");
            
     

            while (numberChar < 8 || numberChar > 128 || isNaN(numberChar)) {
                alert("You must enter a number between 8 and 128");
                numberChar = prompt("How many characters would you like in your password? It must be between 8 and 128.");
              

            }


    //user prompt to select type

            let useSpecial = false; 
            let useNumerical = false; 
            let useLower = false; 
            let useUpper = false; 

            while (!useSpecial && !useNumerical && !useLower && !useUpper) {
                alert("You need to select at least one character type for your password from the options following this prompt.");
                useSpecial = confirm("Would you like to have special characters in your password?"); 
                useNumerical = confirm("Would you like to have numerical characters in your password?"); 
                useLower = confirm("Would you like to have lowercase letters in your password?"); 
                useUpper = confirm("Would you like to have uppercase letters in your password?"); 

            }
              

    //generate list of characters to use in password based on user selection

            function addCharSelect(useChar,type) {
                if (useChar) {
                    passwordOptions = passwordOptions + type;
                    passwordCheck.push(type); 
                }; 
            }

            addCharSelect(useSpecial, special);
            addCharSelect(useNumerical, numerical); 
            addCharSelect(useLower, alphaLower);
            addCharSelect(useUpper, alphaUpper); 

            // if (useSpecial) {
            //     passwordOptions = passwordOptions + special;
            //     passwordCheck.push(special); 
            //     }; 
            // if (useNumerical) {
            //     passwordOptions = passwordOptions + numerical;
            //     passwordCheck.push(numerical); 
            //     }; 
            // if (useLower) {
            //     passwordOptions = passwordOptions + alphaLower;
            //     passwordCheck.push(alphaLower); 
            //     }; 
            // if (useUpper) {
            //     passwordOptions = passwordOptions + alphaUpper;
            //     passwordCheck.push(alphaUpper); 
            //     }; 

        

    //function to generate random interger in range 0 to last index of a list lenght:


            function randomNum() {
                return Math.floor(Math.random()*(passwordOptions.length)); 
            }

            // let stringLength= passwordOptions.length;

    //generate password of given lenght form list of possible characters
            function generateNewPassword(){ 
                passwordGenerated = '';
                for (i=0; i < numberChar; i++) {
                    passwordGenerated= passwordGenerated + passwordOptions[randomNum()];
                }
                console.log("Generated password is " + passwordGenerated);
            }

    

            generateNewPassword(); 
             

           
            let countCharCheck = 0; 
            let totalCountCharCheck =[]; 
            function checkGeneratedPassword (){ 

                function checkNamedChar(useChar, type) {
                    if(useChar) {
                        countCharCheck = 0;
                        for (i=0; i < passwordGenerated.length; i++) {
                            if (type.indexOf(passwordGenerated[i]) !== -1) {
                                countCharCheck++; 
                            }
                        }
                        totalCountCharCheck.push(countCharCheck);  
                    }
                }
            
                checkNamedChar(useSpecial, special);
                checkNamedChar(useNumerical, numerical);
                checkNamedChar(useLower, alphaLower);
                checkNamedChar(useUpper, alphaUpper); 

                console.log(totalCountCharCheck); 

                while (totalCountCharCheck.indexOf(0) !== -1) {
                    totalCountCharCheck =[];
                    generateNewPassword(); 
                }
            }

            checkGeneratedPassword(); 

        }

       

    </script>
</body>
</html>

